# خطة تنفيذ نظام إدارة الإجازات والدوام – مستشفى الحكيم

## التقنيات والتصميم

### التقنيات الحديثة
| الطبقة | التقنية | الإصدار |
|--------|---------|---------|
| Frontend | Next.js 14 (App Router) | 14.x |
| Styling | Tailwind CSS | 3.x |
| Components | shadcn/ui + Radix UI | أحدث |
| Charts | Recharts | 2.x |
| Animations | Framer Motion | 11.x |
| State | TanStack Query (React Query) | 5.x |
| Forms | React Hook Form + Zod | أحدث |
| Tables | TanStack Table | 8.x |
| Icons | Lucide React | أحدث |
| Backend | NestJS | 10.x |
| Database | PostgreSQL + Prisma | 5.x |

### لوحة ألوان رسمية احترافية
```
Primary:   #0F4C81 (أزرق مؤسسي)
Secondary: #1E5A8E
Accent:    #2D7AB8
Success:   #0D9488
Warning:   #D97706
Error:     #DC2626
Background: #F8FAFC
Surface:   #FFFFFF
```

---

## المرحلة 1: البنية الأساسية والتصميم (أسبوع 1)

### 1.1 نظام التصميم
- [ ] تحديث Tailwind بألوان رسمية
- [ ] إضافة shadcn/ui
- [ ] مكونات قاعدة: Button, Input, Card, Modal, Table, Badge
- [ ] Layout موحد: Header, Sidebar, Content
- [ ] RTL كامل + خط Cairo

### 1.2 Authentication & Layout
- [ ] حماية routes (middleware)
- [ ] Sidebar تنقل حسب الصلاحيات
- [ ] صفحة Profile + Logout
- [ ] تحسين Dashboard الرئيسي بـ إحصائيات سريعة

---

## المرحلة 2: إدارة الموظفين والأقسام (أسبوع 2)

### 2.1 الأقسام
- [ ] قائمة الأقسام مع بحث وتصفية
- [ ] إضافة / تعديل / إلغاء تفعيل قسم
- [ ] عرض عدد الموظفين لكل قسم

### 2.2 الموظفين
- [ ] جدول الموظفين مع Pagination + بحث
- [ ] إضافة موظف (اسم، وظيفة، قسم، مدير، نوع دوام، رصيد)
- [ ] تعديل موظف
- [ ] عرض تفاصيل موظف
- [ ] استيراد من Excel/CSV

---

## المرحلة 3: إدارة الإجازات (أسبوع 3)

### 3.1 أنواع الإجازات
- [ ] إدارة Leave Types (اعتيادية، مرضية، اضطرارية، بدون راتب)
- [ ] تحديد: استقطاع من الرصيد، موافقة، رصيد سنوي، تراكم شهري

### 3.2 طلبات الإجازات
- [ ] تقديم طلب إجازة (موظف ← مدير)
- [ ] اعتماد / رفض (مدير الإجازات)
- [ ] احتساب تلقائي للرصيد
- [ ] تقويم الإجازات

### 3.3 الرصيد التراكمي
- [ ] عرض رصيد كل موظف
- [ ] تاريخ بداية الاحتساب
- [ ] تراكم شهري تلقائي

---

## المرحلة 4: الغياب والبصمة (أسبوع 4)

### 4.1 تسجيل الغياب
- [ ] إدخال غياب يومي (موظف، تاريخ، سبب)
- [ ] تنبيه إن وجدت إجازة في نفس اليوم
- [ ] تنبيه إن كان عطلة رسمية
- [ ] تنبيه إن كان استراحة خفارة

### 4.2 إلغاء الغياب
- [ ] إلغاء الغياب بموافقة مدير البصمة

---

## المرحلة 5: العطل وجداول الدوام (أسبوع 5)

### 5.1 العطل الرسمية
- [ ] إضافة عطلة (اسم، تاريخ، الفئة: صباحي/الكل/مخصص)
- [ ] قائمة العطل
- [ ] تعديل / حذف

### 5.2 جداول الدوام
- [ ] تحديد جدول موظف: أيام، ساعات، استراحة
- [ ] دعم صباحي وخفارات
- [ ] تعديل الجداول

---

## المرحلة 6: التقارير والـ Dashboard (أسبوع 6)

### 6.1 Dashboard
- [ ] إحصائيات: عدد الموظفين، الإجازات المعلقة، الغيابات الشهرية
- [ ] Charts: رصيد الإجازات، الغيابات حسب الشهر
- [ ] تنبيهات ولوحة موجزة

### 6.2 التقارير
- [ ] تقرير رصيد الإجازات
- [ ] تقرير الغيابات الشهرية
- [ ] الموظفين الذين لم يأخذوا إجازات
- [ ] مقارنة الأقسام
- [ ] تصدير Excel و PDF

---

## المرحلة 7: الصلاحيات والأمان (أسبوع 7)

### 7.1 نظام الصلاحيات
- [ ] Guards حسب الدور (Admin, Leave Manager, Fingerprint, Manager)
- [ ] مدير قسم يرى موظفيه فقط
- [ ] واجهة إدارة المستخدمين (Admin)

### 7.2 Audit Log
- [ ] تسجيل كل عملية (من، ماذا، متى)
- [ ] واجهة عرض السجل

---

## المرحلة 8: الأداء والميزات النهائية (أسبوع 8)

### 8.1 الأداء
- [ ] Pagination لجميع الجداول
- [ ] React Query للـ caching
- [ ] Lazy loading للمكونات
- [ ] تحسين الاستعلامات

### 8.2 إضافات
- [ ] إشعارات داخل النظام
- [ ] زر طباعة التقارير
- [ ] PWA (اختياري)
- [ ] Mobile-first + Touch-friendly

---

## أولويات البدء

1. **المرحلة 1** – التصميم و shadcn/ui
2. **المرحلة 2** – الموظفين والأقسام
3. **المرحلة 3** – الإجازات
4. **المرحلة 4** – الغياب

---

## هيكل الملفات المقترح (Frontend)

```
frontend/src/
├── app/
│   ├── (auth)/login/
│   ├── (dashboard)/
│   │   ├── dashboard/
│   │   ├── employees/
│   │   ├── departments/
│   │   ├── leaves/
│   │   ├── absences/
│   │   ├── holidays/
│   │   ├── schedules/
│   │   └── reports/
│   └── layout.tsx
├── components/
│   ├── ui/          # shadcn
│   ├── layout/
│   └── forms/
├── lib/
│   ├── api.ts
│   └── utils.ts
└── hooks/
```
