# خطة تطوير صفحة الموظفين — نسخة احترافية

> هدف الخطة: جعل صفحة الموظفين رائدة من حيث التصميم، التجربة، والأداء.

---

## المرحلة 1: تحسينات UX والتجربة

### 1.1 البحث والفلترة
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| بحث فوري مع debounce | تقليل الطلبات عند الكتابة (300-500ms) | عالية |
| بحث من URL | حفظ الفلاتر في query params للربط والمشاركة | متوسطة |
| فلاتر سريعة (Chips) | عرض الفلاتر النشطة كشريط فوق الجدول مع إمكانية إزالتها | عالية |
| حفظ الفلاتر | حفظ تفضيلات الفلترة في localStorage | منخفضة |

### 1.2 الترقيم والتصفح
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| اختيار عدد الصفوف | 10 / 25 / 50 / 100 لكل صفحة | عالية |
| ترقيم صفحات ذكي | عرض أرقام الصفحات مع "..." للقفز | متوسطة |
| انتقال سريع | حقل للانتقال لرقم صفحة معيّن | منخفضة |

### 1.3 الجدول
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| ترتيب الأعمدة | نقرة للترتيب حسب الاسم، القسم، الرصيد | عالية |
| أعمدة قابلة للإخفاء | اختيار الأعمدة المعروضة | متوسطة |
| صفوف قابلة للنقر | فتح بطاقة الموظف أو نافذة تفاصيل | عالية |
| جدول متجاوب | تحويل لبطاقات على الموبايل بدل الجدول | عالية |

---

## المرحلة 2: صفحة تفاصيل الموظف

### 2.1 بطاقة الموظف
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| صفحة `/dashboard/employees/[id]` | عرض تفاصيل كاملة للموظف | عالية |
| تبويبات | معلومات أساسية | إجازات | غيابات | جدول الدوام | عالية |
| ملخص سريع | رصيد الإجازات، آخر إجازة، غيابات الشهر | عالية |
| روابط سريعة | طلب إجازة، تسجيل غياب | متوسطة |

### 2.2 نافذة معاينة سريعة
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| Drawer/Sheet | نافذة جانبية عند النقر على الموظف | متوسطة |
| إجراءات سريعة | تعديل، طلب إجازة، إيقاف/تفعيل | متوسطة |

---

## المرحلة 3: تحسين النماذج (إضافة/تعديل)

### 3.1 نموذج إضافة موظف
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| خطوات (Stepper) | بيانات أساسية → القسم والمدير → الرصيد والإعدادات | متوسطة |
| التحقق من الصحة | رسائل خطأ واضحة مع Zod/React Hook Form | عالية |
| اقتراحات الذكاء | اقتراح أقسام وعناوين وظيفية عند الكتابة | منخفضة |
| زر "إضافة آخر" | إبقاء النافذة مفتوحة وإضافة موظف آخر | متوسطة |
| حقل نوع الدوام | إضافة اختيار MORNING/SHIFTS في النموذج | عالية |

### 3.2 نموذج التعديل
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| مقارنة التغييرات | إبراز الحقول المعدّلة | منخفضة |
| تأكيد الحذف/الإيقاف | تأكيد عند تعطيل الموظف | عالية |

---

## المرحلة 4: الاستيراد والتصدير

### 4.1 استيراد Excel
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| سحب وإفلات | Drag & drop للملفات | عالية |
| معاينة قبل الاستيراد | عرض أول 10 صفوف والتحقق من الأعمدة | عالية |
| خريطة الأعمدة | اختيار أي عمود = الاسم، العنوان، القسم | عالية |
| تقرير النتائج | عرض تفصيلي: ناجح/فاشل مع أسباب الفشل | عالية |
| شريط تقدم | عرض تقدم الاستيراد للملفات الكبيرة | متوسطة |

### 4.2 تصدير
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| تصدير Excel | تصدير الموظفين المعروضين حاليًا | عالية |
| تصدير PDF | تقرير بالموظفين مع الفلاتر | متوسطة |

---

## المرحلة 5: KPIs وإحصائيات متقدمة

### 5.1 مؤشرات إضافية
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| رسم بياني توزيع الأقسام | Pie/Bar chart | متوسطة |
| موظفين جدد الشهر | عدد الإضافات الأخيرة | متوسطة |
| متوسط الرصيد | متوسط رصيد الإجازات للموظفين النشطين | منخفضة |
| تطور الأعداد | خط بياني لفترات زمنية | منخفضة |

### 5.2 تفاعل KPIs
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| نقرة على KPI | تطبيق فلتر تلقائي (مثلاً: النشطين فقط) | عالية |
| تحديث تلقائي | تحديث KPIs مع الفلاتر الحالية | مكتمل |

---

## المرحلة 6: الأداء والجودة

### 6.1 الأداء
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| Virtual scrolling | للجداول الكبيرة (1000+ صف) | متوسطة |
| تحميل كسول للصور | إن وُجدت صور للموظفين | منخفضة |
| تحميل مسبق | Prefetch عند hover على صف | منخفضة |

### 6.2 إمكانية الوصول
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| لوحة المفاتيح | التنقل الكامل بلوحة المفاتيح | عالية |
| ARIA labels | دعم قارئات الشاشة | عالية |
| تباين الألوان | دعم وضع التباين العالي | متوسطة |

### 6.3 تجربة التحميل
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| Skeleton محسّن | هيكل شبيه بالجدول النهائي | متوسطة |
| رسائل حالة | تحميل، خطأ، فارغ بشكل واضح | مكتمل |

---

## المرحلة 7: إجراءات جماعية وإدارة

### 7.1 إجراءات متعددة
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| تحديد متعدد | Checkbox لاختيار عدة موظفين | متوسطة |
| تصدير المحددين | تصدير الموظفين المحددين فقط | متوسطة |
| تغيير الحالة جماعيًا | تفعيل/إيقاف لعدة موظفين | متوسطة |

### 7.2 حذف/إيقاف الموظف
| الميزة | الوصف | الأولوية |
|--------|-------|----------|
| إيقاف بدل الحذف | تعطيل الموظف مع الحفاظ على السجلات | مكتمل |
| حذف مع التأكيد | في حال إضافة حذف فعلي | متوسطة |

---

## ترتيب التنفيذ المقترح

### Sprint 1 (أساسي)
1. Debounce للبحث
2. حقل نوع الدوام في نموذج الإضافة
3. اختيار عدد الصفوف (10/25/50)
4. ترتيب الأعمدة
5. سحب وإفلات في الاستيراد

### Sprint 2 (تفاصيل وملخص)
1. صفحة تفاصيل الموظف `/employees/[id]`
2. نقرة على KPI لتطبيق فلتر
3. فلاتر سريعة (Chips)
4. التحقق من الصحة في النماذج (Zod)

### Sprint 3 (استيراد وتصدير)
1. معاينة قبل الاستيراد
2. خريطة الأعمدة
3. تقرير نتائج الاستيراد
4. تصدير Excel

### Sprint 4 (تحسينات متقدمة)
1. جدول متجاوب (بطاقات على الموبايل)
2. رسم بياني توزيع الأقسام
3. زر "إضافة آخر"

---

## مكونات جديدة مطلوبة

| المكون | الاستخدام |
|--------|-----------|
| `Drawer` / `Sheet` | معاينة سريعة للموظف |
| `Tabs` | صفحة التفاصيل |
| `Pagination` | ترقيم متقدم |
| `DataTable` | جدول مع ترتيب واختيار |
| `FileDropzone` | منطقة رفع ملفات |
| `Breadcrumb` | موجود — للتأكد من استخدامه |

---

## ملخص الأولويات

| الأولوية | عدد المهام | التركيز |
|----------|------------|---------|
| عالية | 18 | UX، أداء، جودة |
| متوسطة | 15 | ميزات إضافية |
| منخفضة | 6 | تحسينات ثانوية |

---

*آخر تحديث: فبراير 2026*
