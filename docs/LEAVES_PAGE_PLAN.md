# خطة صفحة الإجازات — نسخة احترافية

> الهدف: إدارة طلبات الإجازات بالزمنيات بالساعات (وليس الأيام فقط)

---

## ما تم تنفيذه ✓

### 1. قاعدة البيانات
- إضافة حقل `hoursCount` (Decimal) لجدول `leave_requests`
- Migration: `20260212000000_add_leave_hours`

### 2. منطق الحساب
- **8 ساعات = 1 يوم عمل** (قابل للتعديل)
- عند إدخال الساعات: يحسب النظام `daysCount` و `endDate` تلقائياً
- عند إدخال الأيام: يحسب النظام `hoursCount` و `endDate` تلقائياً
- **تاريخ المباشرة** = تاريخ نهاية الإجازة + 1 يوم

### 3. نموذج طلب الإجازة
- اختيار الموظف (بحث بالاسم أو القسم)
- اختيار نوع الإجازة (بحث)
- إدخال المدة: **بالساعات** أو **بالأيام** (زر راديو)
- اختيار تاريخ بداية الإجازة
- **حساب تلقائي** لتاريخ النهاية وتاريخ المباشرة
- حقل السبب (اختياري)

### 4. صفحة العرض
- **KPIs**: إجمالي، قيد الانتظار، معتمدة، مرفوضة
- **فلاتر**: الحالة، القسم، نوع الإجازة، نطاق التاريخ
- عرض الطلبات مع الساعات أو الأيام
- اعتماد/رفض للطلبات قيد الانتظار
- ترقيم الصفحات

---

## المرحلة 2 ✓ (منفذة)

- ربط بجدول الدوام لحساب ساعات العمل الفعلية
- دعم إجازات جزئية (نصف يوم = 4 ساعات)
- استبعاد العطل من الحساب عند تحديد تاريخ النهاية
- أزرار سريعة: نصف يوم (4س)، يوم (8س)، يومين (16س)، ثلاثة أيام (24س)

## المرحلة 3 ✓ (منفذة)

- تنبيه عند تجاوز الرصيد — يظهر تحذير ويُعطّل زر الإرسال
- عرض رصيد الموظف عند اختياره

---

*آخر تحديث: فبراير 2026*
